<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.Group?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.effect.ColorAdjust?>
<?import javafx.scene.control.ProgressIndicator?>
<BorderPane fx:id="mainContainer"
            xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.mahjong_java.mahjong_java.HelloController"
            style="-fx-background-color: #1e1e2e;">
    <top>
        <HBox fx:id="toolbar" spacing="20" alignment="CENTER_LEFT"
              prefHeight="85.0" minHeight="85.0" maxHeight="85.0"
              style="-fx-padding: 10 25;
                     -fx-background-color: #181825;
                     -fx-border-color: #313244;
                     -fx-border-width: 0 0 2 0;
                     -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.5), 10, 0, 0, 5);">

            <HBox spacing="20" alignment="CENTER_RIGHT" style="-fx-padding: 10 20 10 20;">

                <VBox alignment="CENTER_LEFT" spacing="-5">
                    <Label text="MAHJONG" style="-fx-text-fill: #FFFFFF; -fx-font-size: 18; -fx-font-weight: 900; -fx-letter-spacing: 2;"/>
                    <Label text="ZEN"
                           style="-fx-text-fill: linear-gradient(to bottom, #ffe27d 0%, #ffcc33 45%, #e6b800 100%);
              -fx-font-size: 24;
              -fx-font-weight: 900;
              -fx-padding: 0 0 0 2;
              -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.8), 3, 0, 0, 1);
              -fx-letter-spacing: 2;"/>
                </VBox>

                <Region HBox.hgrow="ALWAYS" />

            </HBox>

            <HBox alignment="CENTER" spacing="10" style="-fx-padding: 0 15;">
                <Label fx:id="percentageLabel" text="0%"
                       style="-fx-text-fill: linear-gradient(to bottom, #ffe27d 0%, #ffcc33 50%, #e6b800 100%);
              -fx-font-size: 28;
              -fx-font-weight: 900;
              -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.75), 4, 0, 0, 1);" />

                <Label text="PROGRESS"
                       style="-fx-text-fill: #FFFFFF;
                  -fx-font-size: 14;
                  -fx-font-weight: bold;
                  -fx-opacity: 0.8;"/>
            </HBox>

            <Pane HBox.hgrow="ALWAYS" />
            <Pane HBox.hgrow="ALWAYS" />

            <HBox spacing="25" alignment="CENTER">
                <VBox alignment="CENTER" spacing="4">
                    <Button onAction="#handleShuffle" prefWidth="60" prefHeight="50"
                            style="-fx-background-color: linear-gradient(to bottom, #ffe27d 0%, #ffcc33 50%, #e6b800 100%);
                   -fx-border-color: #11111b; -fx-border-width: 1.5; -fx-border-radius: 8; -fx-background-radius: 8; -fx-cursor: hand;">
                        <graphic>
                            <ImageView fitHeight="25" fitWidth="25" preserveRatio="true">
                                <image>
                                    <Image url="@Images/Icons/shuffle.png" />
                                </image>
                                <effect>
                                    <ColorAdjust brightness="-1.0" />
                                </effect>
                            </ImageView>
                        </graphic>
                    </Button>
                    <Label text="SHUFFLE"
                           style="-fx-text-fill: linear-gradient(to bottom, #ffe27d 0%, #ffcc33 50%, #e6b800 100%);
                  -fx-font-size: 11; -fx-font-weight: bold;"/>
                </VBox>

                <VBox alignment="CENTER" spacing="4">
                    <Button onAction="#handleReset" prefWidth="60" prefHeight="50"
                            style="-fx-background-color: linear-gradient(to bottom, #ffe27d 0%, #ffcc33 50%, #e6b800 100%);
                   -fx-border-color: #11111b; -fx-border-width: 1.5; -fx-border-radius: 8; -fx-background-radius: 8; -fx-cursor: hand;">
                        <graphic>
                            <ImageView fitHeight="25" fitWidth="25" preserveRatio="true">
                                <image>
                                    <Image url="@Images/Icons/rotate-ccw.png" />
                                </image>
                                <effect>
                                    <ColorAdjust brightness="-1.0" />
                                </effect>
                            </ImageView>
                        </graphic>
                    </Button>
                    <Label text="RESTART"
                           style="-fx-text-fill: linear-gradient(to bottom, #ffe27d 0%, #ffcc33 50%, #e6b800 100%);
                  -fx-font-size: 11; -fx-font-weight: bold;"/>
                </VBox>

                <VBox alignment="CENTER" spacing="4">
                    <Button onAction="#handleNewGame" prefWidth="60" prefHeight="50"
                            style="-fx-background-color: linear-gradient(to bottom, #ffe27d 0%, #ffcc33 50%, #e6b800 100%);
                   -fx-border-color: #11111b; -fx-border-width: 1.5; -fx-border-radius: 8; -fx-background-radius: 8; -fx-cursor: hand;">
                        <graphic>
                            <ImageView fitHeight="25" fitWidth="25" preserveRatio="true">
                                <image>
                                    <Image url="@Images/Icons/circle-plus.png" />
                                </image>
                                <effect>
                                    <ColorAdjust brightness="-1.0" />
                                </effect>
                            </ImageView>
                        </graphic>
                    </Button>
                    <Label text="NEW GAME"
                           style="-fx-text-fill: linear-gradient(to bottom, #ffe27d 0%, #ffcc33 50%, #e6b800 100%);
                  -fx-font-size: 11; -fx-font-weight: bold;"/>
                </VBox>
            </HBox>
            <Pane HBox.hgrow="ALWAYS" />
            <Pane HBox.hgrow="ALWAYS" />
            <Pane HBox.hgrow="ALWAYS" />

            <HBox spacing="10" alignment="CENTER">
                <Label text="Layout:" style="-fx-text-fill: #cdd6f4; -fx-font-size: 14;"/>
                <ComboBox fx:id="layoutSelector" prefWidth="130" onAction="#handleNewGame"
                          style="-fx-background-color: #313244;
                     -fx-control-inner-background: #313244;
                     -fx-selection-bar: #45475a;
                     -fx-background-insets: 0;
                     -fx-effect : null;
                     -fx-padding : 0;
                     -fx-text-fill: white;">
                    <items>
                        <FXCollections fx:factory="observableArrayList">
                            <String fx:value="Turtle"/>
                            <String fx:value="Dragon"/>
                            <String fx:value="Fortress"/>
                            <String fx:value="Cloud"/>
                            <String fx:value="Overpass"/>
                        </FXCollections>
                    </items>
                    <value>
                        <String fx:value="Turtle"/>
                    </value>
                </ComboBox>
            </HBox>
        </HBox>
    </top>

    <center>
        <StackPane fx:id="gameArea" style="-fx-background-color: #1e1e2e;">
            <Group fx:id="zoomGroup">
                <Group fx:id="rootPane" />
            </Group>

            <VBox fx:id="loadingOverlay" visible="false" alignment="CENTER" spacing="15"
                  style="-fx-background-color: rgba(30, 30, 46, 0.85);">
                <children>
                    <ProgressIndicator prefWidth="80" prefHeight="80"
                                       style="-fx-progress-color: #f1d592;" />
                    <Label fx:id="loadingLabel" text="LOADING..."
                           style="-fx-text-fill: #f1d592; -fx-font-size: 18; -fx-font-weight: bold;" />
                </children>
            </VBox>
        </StackPane>
    </center>
</BorderPane>